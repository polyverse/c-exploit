
#!/bin/bash
set -e

declare -r PV_DOCKER_REGISTRY="polyverse"
declare -r PV_GIT_COMMIT="$(git rev-parse --verify HEAD)"
declare -r PV_NAME="c-exploit"


main() {
	# build the image
	build
        [ $? -ne 0 ] && return 1

	return 0
}

build() {
	docker build -t "${PV_DOCKER_REGISTRY}/${PV_NAME}:latest" -t "${PV_DOCKER_REGISTRY}/${PV_NAME}:${PV_GIT_COMMIT}" .
        [ $? -ne 0 ] && return 1

        return 0
}

main "$@"
exit $?
